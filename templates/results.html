<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scan Results - Kenzen Checker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Scan Results</h1>
        </header>

        {% if limit_warning %}
        <div class="result-box warning">
            <p><strong>Notice:</strong> {{ limit_warning }}</p>
        </div>
        {% endif %}

        {% if captcha_hit %}
        <div class="result-box captcha-warning">
            <h2>üõë CAPTCHA DETECTED! SCAN HALTED.</h2>
            <p>The scan was stopped because Garena's security system was triggered. To continue:</p>
            <ol>
                <li>Change your IP address (use a VPN, mobile data, or restart your router).</li>
                <li>Copy the remaining unchecked accounts from the "Failed / Skipped" list below.</li>
                <li>Go back and start a new scan with the copied accounts.</li>
            </ol>
        </div>
        {% endif %}

        <div class="summary">
            <h2>Summary</h2>
            <p><strong>Total Accounts Submitted:</strong> {{ total_submitted }}</p>
            <p class="success-text"><strong>Successful Hits:</strong> {{ success_results | length }}</p>
            <p class="failed-text"><strong>Failed / Skipped:</strong> {{ failed_results | length }}</p>
        </div>

        <div class="results-section">
            <h2>‚úÖ Successful Accounts ({{ success_results | length }})</h2>
            {% if success_results %}
                {% for result in success_results %}
                <div class="result-box success">
                    <h3>{{ result.account }}</h3>
                    <pre>{{ result.details | strip_ansi }}</pre>
                </div>
                {% endfor %}
            {% else %}
                <p>No successful accounts found.</p>
            {% endif %}
        </div>

        <div class="results-section">
            <h2>‚ùå Failed / Skipped Accounts ({{ failed_results | length }})</h2>
             {% if failed_results %}
                {% for result in failed_results %}
                <div class="result-box failed">
                    <h3>{{ result.account }}</h3>
                    <p><strong>Reason:</strong> {{ result.reason | strip_ansi }}</p>
                </div>
                {% endfor %}
            {% else %}
                <p>No failed or skipped accounts.</p>
            {% endif %}
        </div>
        
        <a href="/" class="submit-btn back-btn">‚Üê Start a New Scan</a>

    </div>
    <footer>
        <p>Scan complete. Generated by Kenzen Checker.</p>
    </footer>
</body>
</html>