<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scan Results - Kenzen Checker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìä</text></svg>">
</head>
<body>
    <div class="container results-container">
        <header>
            <div class="logo">üìä</div>
            <h1>Scan Results</h1>
        </header>

        {% if limit_warning %}
        <div class="result-box warning">
            <p><strong>Notice:</strong> {{ limit_warning }}</p>
        </div>
        {% endif %}

        {% if captcha_hit %}
        <div class="result-box captcha-warning">
            <h2>üõë CAPTCHA DETECTED! SCAN HALTED.</h2>
            <p>The scan was stopped because Garena's security system was triggered. To continue:</p>
            <ol>
                <li>Change your IP address (use a VPN, mobile data, or restart your router).</li>
                <li>Copy the remaining unchecked accounts from the "Failed / Skipped" list below.</li>
                <li>Go back and start a new scan with the copied accounts.</li>
            </ol>
        </div>
        {% endif %}

        <div class="summary">
            <div class="summary-item">
                <span class="summary-label">Total Submitted</span>
                <span class="summary-value">{{ total_submitted }}</span>
            </div>
             <div class="summary-item">
                <span class="summary-label">Successful Hits</span>
                <span class="summary-value success-text">{{ success_results | length }}</span>
            </div>
             <div class="summary-item">
                <span class="summary-label">Failed / Skipped</span>
                <span class="summary-value failed-text">{{ failed_results | length }}</span>
            </div>
        </div>
        
        <div class="results-section">
            <h2><span class="icon-green">‚úî</span> Successful Accounts ({{ success_results | length }})</h2>
            {% if success_results %}
                {% for result in success_results %}
                <details class="result-box success">
                    <summary><h3>{{ result.account }}</h3></summary>
                    <pre>{{ result.details | strip_ansi }}</pre>
                </details>
                {% endfor %}
            {% else %}
                <p class="no-results">No successful accounts found in this batch.</p>
            {% endif %}
        </div>

        <div class="results-section">
            <h2><span class="icon-red">‚úñ</span> Failed / Skipped Accounts ({{ failed_results | length }})</h2>
             {% if failed_results %}
                {% for result in failed_results %}
                 <details class="result-box failed">
                    <summary><h3>{{ result.account }}</h3></summary>
                    <p><strong>Reason:</strong> {{ result.reason | strip_ansi }}</p>
                </details>
                {% endfor %}
            {% else %}
                <p class="no-results">No failed or skipped accounts.</p>
            {% endif %}
        </div>
        
        <a href="/" class="submit-btn back-btn">‚Üê Start a New Scan</a>

    </div>
    <footer>
        <p>Scan complete. Generated by Kenzen Checker.</p>
    </footer>
</body>
</html>
